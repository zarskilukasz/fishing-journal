---
/**
 * Dashboard page - main view for logged-in users.
 * Displays the list of fishing trips with quick-start functionality.
 */
import AppLayout from "@/layouts/AppLayout.astro";
import { Dashboard } from "@/components/trips";

// Get Supabase client from middleware (auth already verified in AppLayout)
const supabase = Astro.locals.supabase;
const {
  data: { user },
  error,
} = await supabase.auth.getUser();

// Redirect if not authenticated (should not happen due to AppLayout check)
if (error || !user) {
  return Astro.redirect("/");
}
---

<AppLayout title="Wyprawy" showFAB={false}>
  <Dashboard client:load />
</AppLayout>
